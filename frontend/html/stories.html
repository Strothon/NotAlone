<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stories of Well-being</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anasayfa | NOTALONE</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/581952776c.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="../css/stories.css">
    <link rel="stylesheet" href="owl/owl.carousel.min.css">
    <link rel="stylesheet" href="owl/owl.theme.default.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="owl/owl.carousel.min.js"></script>
    <script src="owl/script.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">



</head>
<body>

    <!-- Sabit Üst Menü -->
    <section id="menu">
        <div id="logo">NOTALONE</div>
        <div id="menu-toggle" onclick="toggleLeftMenu()">☰</div>
        <nav>
            <li><a href="../html/home.html">Home</a></li>
            <li><a href="../html/about.html">About</a></li>
            <li><a href="../html/knowyourrights.html">Know Your Rights</a></li>
            <li><a href="../html/stories.html">Stories</a></li>
            <li><a href="../html/blog.html">Blog</a></li>
            <li><a href="../html/forum.html">Forum</a></li>
            <li><a href="../html/support.html">Support</a></li>
            <li><a href="../html/commentPolicy.html">Comment Policy</a></li>
            <li><a href="javascript:void(0);" id="userIcon"><i class="fa-regular fa-user"></i></a></li>
        </nav>
    </section>

<!-- Sağ Menü -->
<div id="loginPanel" class="sidenav-right">
    <div class="sidenav__inner">
       <!-- Giriş Paneli -->
<div id="loginForm" class="auth-section">
    <div class="menu-header">
        <div class="close-btn" onclick="toggleRightMenu()">✖</div>
    </div>
    <h2>Login</h2>
    <form onsubmit="handleLogin(event)">
        <input type="email" id="loginEmail" placeholder="Email" required class="form-control">
        <div class="password-container">
            <input type="password" id="loginPassword" placeholder="Password" required class="form-control">
            <i class="fa fa-eye" id="togglePassword" style="cursor: pointer;"></i>
        </div>
        <button type="submit" class="submit-button">Login</button>
        <div class="links">
            <a href="#" onclick="showForgotPassword(event)">Forgot Password?</a>
            <a href="#" onclick="showSignUp(event)">Sign Up</a>
        </div>
    </form>
</div>

<!-- Giriş Yaptıktan Sonraki Panel -->
<div id="userPanelContent" class="user-panel-section" style="display: none;">
    <div class="menu-header">
        <div class="close-btn" onclick="toggleRightMenu()">✖</div>
    </div>
    <div class="user-info">
        <div class="user-header">
            <i class="fa-regular fa-user"></i>
            <span id="welcomeUsername">Welcome, User</span>
        </div>
    </div>
    
    <nav class="user-nav">
        <a href="#" class="nav-item">
            <i class="fa-regular fa-user"></i>
            <span>My Profile</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fa-regular fa-paper-plane"></i>
            <span>My Posts</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fa-regular fa-comment"></i>
            <span>My Comments</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fa-regular fa-heart"></i>
            <span>Liked Posts</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fa-regular fa-bookmark"></i>
            <span>Saved Posts</span>
        </a>
        
    </nav>
    <div class="logout-container">
        <button id="logoutButton" onclick="handleLogout()">
            <i class="fa-solid fa-right-from-bracket"></i> Logout
        </button>
    </div>
</div>


        <!-- Şifremi Unuttum Paneli -->
        <div id="forgotPasswordForm" class="auth-section" style="display: none;">
            <div class="menu-header">
                <div class="close-btn" onclick="toggleRightMenu()">✖</div>
            </div>
            <h2>Reset Password</h2>
            <p class="auth-description">Enter your email address and we'll send you a link to reset your password.</p>
            <form onsubmit="handleForgotPassword(event)">
                <input type="email" id="resetEmail" placeholder="Email" required class="form-control">
                <button type="submit" class="submit-button">Send Reset Link</button>
                <div class="links">
                    <a href="#" onclick="showLogin(event)">Back to Login</a>
                </div>
            </form>
        </div>

        <!-- Kaydolma Paneli -->
        <div id="signUpForm" class="auth-section" style="display: none;">
            <div class="menu-header">
                <div class="close-btn" onclick="toggleRightMenu()">✖</div>
            </div>
            <h2>Sign Up</h2>
            <form onsubmit="handleSignUp(event)">
                <div class="form-group">
                    <input type="text" id="firstName" placeholder="First Name" required class="form-control">
                </div>
                <div class="form-group">
                    <input type="text" id="lastName" placeholder="Last Name" required class="form-control">
                </div>
                <div class="form-group">
                    <input type="email" id="signUpEmail" placeholder="Email" required class="form-control">
                </div>
                <div class="form-group">
                    <input type="password" id="signUpPassword" placeholder="Password" required class="form-control">
                </div>
                <div class="form-group">
                    <input type="password" id="confirmPassword" placeholder="Confirm Password" required class="form-control">
                </div>
                <div class="form-group">
                    <input type="tel" id="phone" placeholder="Phone Number" required class="form-control">
                </div>
                <div class="form-group">
                    <input type="date" id="birthDate" placeholder="Birth Date" required class="form-control">
                </div>
                <div class="form-group">
                    <select id="gender" class="form-control" required>
                        <option value="">Select Gender</option>
                        <option value="female">Female</option>
                        <option value="male">Male</option>
                        <option value="other">Other</option>
                        <option value="prefer-not">Prefer not to say</option>
                    </select>
                </div>
                <button type="submit" class="submit-button">Sign Up</button>
                <div class="links">
                    <a href="#" onclick="showLogin(event)">Already have an account? Login</a>
                </div>
            </form>
        </div>

        <!-- Kullanıcı Panel İçeriği (giriş yapıldıktan sonra) -->
        <div id="userPanelContent" class="user-panel-section" style="display: none;">
            <!-- Mevcut kullanıcı paneli içeriği buraya -->
        </div>
    </div>
</div>


    <!-- Sol Sütun -->
    <div id="sol-sutun">
        <div id="menu-toggle" onclick="toggleLeftMenu()">☰</div> <!-- Menü Butonu -->
    </div>
    
    <!-- Menü Aç/Kapat İşlevi -->
    <script>
        function toggleLeftMenu() {
            const sidenav = document.getElementById('sidenav');
            sidenav.classList.toggle('active');
        }
    </script>   

<!-- Sol Menü -->
<div id="sidenav" class="sidenav">
    <div class="sidenav__inner">
        <div class="menu-header">
            <div id="logo-menu">
                <span style="color:#e7bcbc; font-size: 30px;">
                    W♀men, Peace and Security
                </span>
            </div>
            <div class="close-btn" onclick="toggleLeftMenu()">✖</div>
        </div>
        <nav>
            <a href="../html/home.html"><i class="fa-solid fa-home"></i>Home</a>
            <a href="../html/about.html"><i class="fa-solid fa-info"></i>About</a>
            <a href="../html/knowyourrights.html"><i class="fa-solid fa-balance-scale"></i>Know Your Rights</a>
            <a href="../html/stories.html"><i class="fa-solid fa-pen"></i>Stories</a>
            <a href="../html/blog.html"><i class="fa-solid fa-blog"></i>Blog</a>
            <a href="../html/forum.html"><i class="fa-solid fa-comments"></i>Forum</a>
            <a href="../html/support.html"><i class="fa-solid fa-calendar"></i>Support</a>
            <a href="../html/commentPolicy.html"><i class="fa-solid fa-comment"></i>Comment Policy</a>
        </nav>
    </div>
</div>

<div class="fusion-column-wrapper fusion-column-has-shadow fusion-flex-justify-content-flex-start fusion-content-layout-column">
    <div class="fusion-title title fusion-title-2 fusion-sep-none fusion-title-center fusion-title-text fusion-title-size-two">
      <h2 class="fusion-title-heading title-heading-center">
        <span class="title-text">Stories of Well-being</span>
      </h2>
    </div>
    <div class="fusion-text fusion-text-2 fusion-text-no-margin">
      <p class="subtitle-text"> Comments from women whose lives intersected with NOTALONE</p>
    </div>
    <div class="fusion-title title fusion-title-3 fusion-no-large-visibility fusion-sep-none fusion-title-center fusion-title-text fusion-title-size-two"></div>
  </div>



  <section>
    <div class="grid">

        <div class="grid-item">
            <p class="quote">"I stayed in an abusive relationship where I was subjected to violence for 18 years without a break. But I see myself not as a victim of this relationship, but as a survivor. I managed to stay alive, and I am now living a life I could never have dreamed of before. I have dedicated myself to helping families who experience similar tragedies. I serve as a goodwill ambassador for Gal Women’s Aid and I am also the founder of the SafeLives organization."</p>
            <hr>
            <div class="author">
                <div class="author-icon">WM</div>
                <div class="author-info">Working Mother / 36 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"I went through a process that transformed me from someone pitied to someone respected. As a woman who endured violence for 17 years, you shed light on my darkness. Now, I stand on my own two feet and earn my own money. You reminded me of who I am."</p>
            <hr>
            <div class="author">
                <div class="author-icon">WM</div>
                <div class="author-info">Working Mother / 36 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"I was struggling to survive alone for my children. Previously, I only received financial and food support. After coming to the Women Support Center, my life truly changed. Thanks to the support I received, I can now stand on my own. I earn my own money. But if I had continued in that state, no matter how much food aid I received, I would still have been trapped in that loneliness. Given the choice, I would definitely prefer this side."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 34 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"Here, a light was shone on me. Now I know that light exists. I know the future is bright, and I look to the future with hope. I say this sincerely and wholeheartedly. For a woman, knowing that you can find someone to trust without judgment, someone who opens a door for you, is incredibly important. Especially for women and girls, this is so significant. Sometimes you can’t even go to your father’s house or ask for support from your siblings. Fear of judgment can push you back, but having an institution or organization that says, 'You are valued, you matter, and we care about you,' is incredibly comforting."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 36 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"I was living in Hatay, and after the earthquake, I came to Istanbul. I was looking for a psychologist. As someone who lost everything, I thought it would be financially overwhelming. I saw KDM on an Instagram ad. When I saw it was near me in Fatih, I applied. They responded immediately. I think it’s a great service for women living in Turkey. It’s been a short time, but the sessions I’ve attended have made me feel better day by day. The assignments given during psychologist sessions are very motivating. I enjoy doing them. The sessions make it easier to adapt back to social life."</p>
            <hr>
            <div class="author">
                <div class="author-icon">EQ</div>
                <div class="author-info">Earthquake Survivor / 20 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"I started seeing a psychologist at the Women Support Center. I had problems with my mother and husband. Now, even our conversations have changed. They respect my decisions now. I can also connect with my son better and show him more love and attention. When you’re not well yourself, you can’t make time for your loved ones."</p>
            <hr>
            <div class="author">
                <div class="author-icon">HM</div>
                <div class="author-info">Housewife / 27 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"It’s wonderful, really. I learned to knit. I even made a bag at home. I felt so relieved. I learned how to protect myself. For example, I used to shout a lot at my kids. After meeting with the social worker, I stopped shouting. For instance, if I put something here and they move it, I used to get mad. Now, I don’t react as much. Things have eased up a little."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 46 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"My little son comes with me too, and he loves spending time in the playroom. At first, he didn’t want to be apart from me, but now he doesn’t even remember me until my session is over."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 36 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"Your perspective on yourself changes here. You realize you can achieve what you want. You get psychological support, attend seminars, and think: I can get an education, I can study, and I can work. Now I have people who support me."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 36 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"This is only my second session, but there are already some changes. For instance, I had no tolerance for anger. Now, I can manage it a little. Not entirely yet, but I believe it will get better. Before coming here, I didn’t want to go outside, I would sleep all the time, and I couldn’t even take care of my child. But now that’s gone. For example, after our session today, I’m planning to take my child to the park. I never wanted to do that before. I always wanted to stay home, shutting myself away."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 27 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"I joined handicraft courses with my Azerbaijani friend. The instructors are very kind and attentive. They explain everything clearly and treat us with respect. We took an amigurumi course. We discovered that we have a skill, and we are both very satisfied."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 36 Years Old</div>
            </div>
        </div>

        <div class="grid-item">
            <p class="quote">"When I applied to the Women Support Center, I needed financial assistance. The social worker helped me apply to the district governor’s office. When I went there, I learned what rights I could benefit from. I didn’t know about these before."</p>
            <hr>
            <div class="author">
                <div class="author-icon">SM</div>
                <div class="author-info">Single Mother / 36 Years Old</div>
            </div>
        </div>

    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const grid = document.querySelector('.grid');
        
        // Fetch combined stories from new endpoint
        fetch('/api/stories/combined')
            .then(response => response.json())
            .then(data => {
                // Process static stories
                data.static_stories.forEach(story => {
                    createStoryCard(story, true);
                });
    
                // Process dynamic stories
                data.dynamic_stories.forEach(story => {
                    createStoryCard(story, false);
                });
    
                // Initialize Masonry after all cards are added
                if (typeof Masonry !== 'undefined') {
                    new Masonry(grid, {
                        itemSelector: '.grid-item',
                        columnWidth: '.grid-item',
                        percentPosition: true
                    });
                }
            })
            .catch(error => console.error('Error loading stories:', error));
    
        function createStoryCard(story, isStatic) {
            const gridItem = document.createElement('div');
            gridItem.className = `grid-item ${isStatic ? 'static-story' : 'dynamic-story'}`;
            
            const initials = story.author_info.split(' ')
                .map(name => name[0])
                .join('')
                .substring(0, 2)
                .toUpperCase();
    
            gridItem.innerHTML = `
                <p class="quote">"${story.content}"</p>
                <hr>
                <div class="author">
                    <div class="author-icon">${initials}</div>
                    <div class="author-info">${story.author_info}</div>
                </div>
            `;
            
            grid.appendChild(gridItem);
        }
    });
    </script>


    <!-- Main content area -->
     <main>

    </main>

    <div class="join-section">
        <div class="fusion-title title fusion-title-4 fusion-sep-none fusion-title-center fusion-title-text fusion-title-size-one">
            <h1 class="fusion-title-heading" style="font-family: 'Outfit', sans-serif; font-size: 60px; color: #313849;">
                <span style="color: #e7bcbc;">Share</span> your story with us<span style="color: #e7bcbc;">.</span>
            </h1>
        </div>
        <div class="fusion-title title fusion-title-5 fusion-sep-none fusion-title-center fusion-title-text fusion-title-size-one">
            <h1 class="fusion-title-heading" style="font-family: 'Outfit', sans-serif; font-size: 30px; font-weight: 500; color: #313849; line-height: 0.8; margin-bottom: 10px;">
                <p><span style="color: #e7bcbc;">NOTALONE</span> adds small touches to every woman's life, empowering them to</p>
                <p>look towards the future with hope. Join the journey of a strong woman,</p>
                <p>share your story, and take your place in our journey.</p>
            </h1>
        </div>
        <div style="text-align:center; margin-top: 20px;">
            <button class="cta-button" onclick="showStoryForm()">Share Your Story</button>
        </div>
    </div>
    
    <!-- stories.html -->
    <div class="story-form" id="storyForm">
        <div class="form-container">
            <form id="storySubmissionForm" onsubmit="submitStory(event)">
                <textarea id="storyContent" placeholder="Write your story here..." required></textarea>
                <div class="form-footer">
                    <hr>
                    <div class="profile-preview">
                        <div class="profile-icon" id="profileIcon">?</div>
                        <input type="text" id="nickname" 
                            placeholder="Enter your name, nickname or title (e.g., Single Mother, Student / 21 Years Old )" 
                            oninput="updateProfileIcon()" required>
                    </div>
                    <button type="submit" class="submit-button">Submit</button>
                </div>
            </form>
        </div>
    </div>

<script>
function submitStory(event) {
    event.preventDefault();
    
    if (!localStorage.getItem('token')) {
        alert('Please login to share your story');
        return;
    }

    const storyData = {
        content: document.getElementById('storyContent').value,
        author_info: document.getElementById('nickname').value
    };

    fetch('/api/stories', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`
        },
        body: JSON.stringify(storyData)
    })
    .then(response => {
        if (!response.ok) throw new Error('Submission failed');
        alert('Story submitted for approval!');
        document.getElementById('storyForm').style.display = 'none';
        location.reload(); // Refresh to show new story
    })
    .catch(error => {
        console.error('Error:', error);
        alert(error.message);
    });
}
</script>
    

    <!-- footer -->
<footer class="footer">
    <div class="footer-content">
        <!-- Footer Logo Section -->
        <div class="footer-logo">
            <div id="logoFooter">NOTALONE</div>
            <div class="logo-text"><p>W♀men, Peace </p><p>and Security</p></div> 
        </div>

        <!-- Quick Links Section -->
        <div class="footer-links">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="../html/home.html">Home</a></li>
                <li><a href="../html/about.html">About</a></li>
                <li><a href="../html/knowyourrights.html">Know Your Rights</a></li>
                <li><a href="../html/stories.html">Stories</a></li>
                <li><a href="../html/blog.html">Blog</a></li>
                <li><a href="../html/forum.html">Forum</a></li>
                <li><a href="../html/support.html">Support</a></li>
                <li><a href="../html/commentPolicy.html">Comment Policy</a></li>
            </ul>
        </div>

        <!-- Contact Section -->
        <div class="footer-contact">
            <h4>Contact</h4>
            <p>
                <i class='bx bx-map'></i>
                Türk Hava Kurumu Üniversitesi Bahçekapı Mah.
            </p>
            <p>
                <i class='bx bx-phone'></i>
                (0212) 389 99 99
            </p>
            <p>
                <i class='bx bx-envelope'></i>
                notalone@gmail.com
            </p>
        </div>

        <!-- Social Media Section -->
        <div class="footer-social">
            <h4>Social Media</h4>
            <div class="social-icons">
                <a href="https://www.facebook.com" target="_blank"><i class='bx bxl-facebook'></i></a>
                <a href="https://www.twitter.com" target="_blank"><i class='bx bxl-twitter'></i></a>
                <a href="https://www.instagram.com" target="_blank"><i class='bx bxl-instagram'></i></a>
                <a href="https://www.linkedin.com/in" target="_blank"><i class='bx bxl-linkedin'></i></a>
            </div>
        </div>
    </div>

    <!-- Copyright Section -->
    <div class="footer-bottom">
        <p>&copy; 2024 NOTALONE</p>
    </div>
</footer>
<script>
    function filterPosts(keyword) {
        const posts = document.querySelectorAll('.post-card');
        posts.forEach(post => {
            if (post.textContent.includes(keyword)) {
                post.style.display = 'block';
            } else {
                post.style.display = 'none';
            }
        });
    }
</script>

    <script src="owl/script.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1..min.js" integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="owl/owl.carousel.min.js"></script>
    <script src="../js/stories.js"></script> <!-- JavaScript dosyasını bağladık -->

</body>
</html>
